{
  "meta": {
    "project": "Vodeco Keuangan",
    "date": "2025-11-14",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Vodeco Keuangan is an integrated finance management application designed for individuals, freelancers, and SMEs. It facilitates comprehensive financial workflow by enabling users to record transactions, generate and manage invoices, oversee debts and credits, and produce detailed financial reports within a unified platform.",
  "core_goals": [
    "Provide a secure and role-based access control system for users including Admin, Accountant, Staff, and general Users.",
    "Enable efficient management of financial transactions including creation, update, deletion, and approval workflows.",
    "Support robust invoice management with features including invoice creation, editing, deletion, PDF generation, and public sharing with payment confirmations.",
    "Manage debts and payments, calculating outstanding amounts accurately to assist financial tracking.",
    "Generate financial reports with customizable filters and support exporting data for advanced analysis.",
    "Enhance user experience through an interactive dashboard and streamlined daily workflows.",
    "Automate notification and reminder processes to ensure timely invoice settlements.",
    "Maintain rigorous activity logging and audit trails for accountability.",
    "Support flexible configuration and deployment options suitable for various environments.",
    "Enable collaboration with controlled user management and approval mechanisms."
  ],
  "key_features": [
    "Authentication and Authorization with role-based access control and email verification.",
    "Comprehensive Transaction Management with category assignment, amount tracking, attachment of proofs, and deletion approval workflows.",
    "Invoice Management system featuring dynamic creation, editing, PDF generation with DomPDF, and public invoice portals with passphrase protection.",
    "Invoice Settlement via public links allowing token-based payment confirmations and proof uploads.",
    "Debt Management including down payments, pass-through types, and payment tracking against outstanding balances.",
    "Category Management for incomes and expenses with creation, editing, validation, and deletion capabilities.",
    "Financial Reporting with detailed filtering and Excel export using Maatwebsite Excel.",
    "Pass-Through Invoice creation for advertising packages with budget tracking.",
    "Invoice Portal Passphrase management for secure access control and logging of usage.",
    "Public Invoice Submission portals with passphrase verification for payment confirmations.",
    "User Management including role assignment, profile viewing, and account deletion request workflows.",
    "Activity Logging of user actions with admin views and middleware-based tracking.",
    "Interactive Dashboard displaying financial summaries, transaction overviews, and key metrics.",
    "Settings Management includes theme, notification, storage, and data purge controls.",
    "Customer Service Management for invoice assignment and tracking.",
    "Access Code verification for restricted feature access.",
    "Automated Invoice Reminder dispatch via console commands.",
    "PDF Cache management improving system performance via cleanup commands."
  ],
  "user_flow_summary": [
    "Users authenticate via secure login, email verification, and role-based access control; password reset available.",
    "Users record financial transactions with categorized inputs, attach proofs, and submit deletion requests subject to approvals.",
    "Admins and authorized roles create, edit, and delete invoices; generate PDFs automatically; share invoices publicly with passphrase protection.",
    "Public users access invoice settlement pages via secure links; upload payment proofs and confirm invoice payments.",
    "Users manage debts with records of down payments and pass-through invoices, monitor payment histories, and track outstanding amounts.",
    "Finance teams generate customized financial reports applying filters and export data to Excel for analysis.",
    "Users manage transaction and invoice categories with validation to maintain data integrity.",
    "Admin users manage user accounts, roles, and approve or reject account deletion requests.",
    "Activity logging continuously records user operations with administrator access to logs for auditing.",
    "Users interact with a dashboard summarizing financial data, recent transactions, and key performance indicators.",
    "Settings adjustments made for user preferences, system configurations, and bulk data management.",
    "Customer service representatives handle invoice assignments and track service records.",
    "Automated reminder commands prompt due invoice notifications to users to facilitate timely payments."
  ],
  "validation_criteria": [
    "All user authentication workflows properly secure access with role restrictions enforced.",
    "Transaction management supports full CRUD operations with accurate attachment handling and approval workflows.",
    "Invoice systems generate accurate PDF documents, and public invoice portals require passphrase security.",
    "Debt calculations accurately reflect payments and outstanding balances with synchronization to invoices.",
    "Financial reports generate correctly filtered outputs, and Excel exports match displayed data.",
    "User management enforces role permissions and handles deletion request approvals as specified.",
    "Activity logs record all critical user actions and are accessible for admin review.",
    "Dashboard data reflects latest financial summaries and key metrics with responsive updating.",
    "Settings changes persist correctly and reflect across the application consistently.",
    "Public invoice payment confirmations process correctly via token and passphrase verification.",
    "Automated notifications and reminder commands execute on schedule as intended without failure.",
    "PDF cache cleanup processes remove stale files improving performance without data loss.",
    "Pass-through invoice and advertising package management track budgets and statuses correctly.",
    "All features are tested with Laravel's built-in testing framework and pass with no critical failures."
  ],
  "code_summary": {
    "tech_stack": [
      "PHP 8.3",
      "Laravel 12.0",
      "MySQL/PostgreSQL/SQLite",
      "Tailwind CSS",
      "Alpine.js",
      "Vite",
      "DomPDF",
      "Maatwebsite Excel"
    ],
    "features": [
      {
        "name": "Authentication & Authorization",
        "description": "User authentication, email verification, password reset, role-based access control (Admin, Accountant, Staff, User)",
        "files": [
          "app/Http/Controllers/Auth/AuthenticatedSessionController.php",
          "app/Http/Controllers/Auth/RegisteredUserController.php",
          "app/Http/Controllers/Auth/PasswordResetLinkController.php",
          "app/Http/Controllers/Auth/NewPasswordController.php",
          "app/Http/Controllers/Auth/VerifyEmailController.php",
          "app/Http/Middleware/EnsureUserHasRole.php",
          "app/Models/User.php",
          "app/Enums/Role.php"
        ]
      },
      {
        "name": "Transaction Management",
        "description": "Create, read, update, delete transactions with categories, amounts, dates, and proof attachments. Includes approval workflow for deletions.",
        "files": [
          "app/Http/Controllers/TransactionController.php",
          "app/Models/Transaction.php",
          "app/Services/TransactionService.php",
          "app/Services/TransactionProofService.php",
          "app/Models/TransactionDeletionRequest.php",
          "app/Policies/TransactionPolicy.php"
        ]
      },
      {
        "name": "Invoice Management",
        "description": "Create, edit, delete invoices with items, client information, payment tracking, PDF generation, and public sharing links",
        "files": [
          "app/Http/Controllers/InvoiceController.php",
          "app/Models/Invoice.php",
          "app/Models/InvoiceItem.php",
          "app/Services/InvoicePdfService.php",
          "app/Observers/InvoiceObserver.php",
          "app/Policies/InvoicePolicy.php"
        ]
      },
      {
        "name": "Invoice Settlement",
        "description": "Public settlement links for invoice payment confirmation, token management, and payment proof upload",
        "files": [
          "app/Http/Controllers/InvoiceSettlementController.php",
          "app/Services/InvoiceSettlementService.php"
        ]
      },
      {
        "name": "Debt Management",
        "description": "Manage debts (down payment and pass-through types), record payments, track payment status, and calculate remaining amounts",
        "files": [
          "app/Http/Controllers/DebtController.php",
          "app/Models/Debt.php",
          "app/Models/Payment.php",
          "app/Services/DebtService.php",
          "app/Policies/DebtPolicy.php"
        ]
      },
      {
        "name": "Category Management",
        "description": "Manage transaction categories (pemasukan/pengeluaran), create, update, delete categories with validation",
        "files": [
          "app/Http/Controllers/CategoryController.php",
          "app/Models/Category.php",
          "app/Services/CategoryService.php",
          "app/Policies/CategoryPolicy.php"
        ]
      },
      {
        "name": "Financial Reporting",
        "description": "Generate financial reports with filtering by date, category, type, user. Export to Excel format",
        "files": [
          "app/Http/Controllers/ReportController.php",
          "app/Services/FinancialReportService.php",
          "app/Exports/FinancialReportExport.php"
        ]
      },
      {
        "name": "Pass Through Invoice",
        "description": "Create pass-through invoices for advertising packages, manage packages, and track ad budget usage",
        "files": [
          "app/Http/Controllers/PassThroughPackageController.php",
          "app/Services/PassThroughInvoiceCreator.php",
          "app/Services/PassThroughPackageManager.php",
          "app/Models/PassThroughPackage.php"
        ]
      },
      {
        "name": "Invoice Portal Passphrase",
        "description": "Manage passphrases for public invoice portal access, rotation, activation/deactivation, and usage logging",
        "files": [
          "app/Http/Controllers/InvoicePortalPassphraseController.php",
          "app/Http/Controllers/InvoicePortalPassphraseVerificationController.php",
          "app/Models/InvoicePortalPassphrase.php",
          "app/Models/InvoicePortalPassphraseLog.php",
          "app/Http/Middleware/EnsureInvoicePortalPassphrase.php",
          "app/Enums/InvoicePortalPassphraseAccessType.php"
        ]
      },
      {
        "name": "Public Invoice Submission",
        "description": "Allow public users to submit invoices and payment confirmations through portal with passphrase verification",
        "files": [
          "app/Http/Controllers/PaymentConfirmationController.php",
          "app/Http/Requests/PublicStoreInvoiceRequest.php",
          "app/Http/Requests/PublicConfirmPaymentRequest.php"
        ]
      },
      {
        "name": "User Management",
        "description": "Manage users, update roles, view profiles, handle account deletion requests with approval workflow",
        "files": [
          "app/Http/Controllers/UserController.php",
          "app/Http/Controllers/ProfileController.php",
          "app/Http/Controllers/UserDeletionRequestController.php",
          "app/Policies/UserPolicy.php"
        ]
      },
      {
        "name": "Activity Logging",
        "description": "Log user activities, admin activity log viewing, and activity tracking middleware",
        "files": [
          "app/Models/ActivityLog.php",
          "app/Http/Controllers/Admin/ActivityLogController.php",
          "app/Http/Middleware/LogActivity.php"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Display financial summary, transaction overview, and key metrics for users",
        "files": [
          "app/Http/Controllers/DashboardController.php"
        ]
      },
      {
        "name": "Settings Management",
        "description": "Manage application settings, display preferences, and data management (purge data)",
        "files": [
          "app/Http/Controllers/SettingController.php",
          "app/Models/Setting.php"
        ]
      },
      {
        "name": "Customer Service Management",
        "description": "Manage customer service records for invoice assignment",
        "files": [
          "app/Http/Controllers/CustomerServiceController.php",
          "app/Models/CustomerService.php"
        ]
      },
      {
        "name": "Access Code",
        "description": "Access code verification for certain features",
        "files": [
          "app/Http/Controllers/AccessCodeController.php",
          "app/Models/AccessCode.php"
        ]
      },
      {
        "name": "Invoice Reminder",
        "description": "Send reminders for due invoices via console command",
        "files": [
          "app/Console/Commands/SendInvoiceReminder.php"
        ]
      },
      {
        "name": "PDF Cache Management",
        "description": "Cleanup PDF cache files via console command",
        "files": [
          "app/Console/Commands/CleanupPdfCache.php"
        ]
      }
    ]
  }
}
